/**
 * @author Vladimir Reznichenko <kalessil@gmail.com>
 * @date   12.05.2012
 *
 * https://github.com/kalessil/tv.jquery
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */

(function(e){var d=[];var h=function(u){return[u,1]};var t=function(u,v){return u[0]===v};var p=function(w){var x=w[0];var v=w[1];var u="";if(v>1){u=" ["+v+"]"}return"&rsaquo; "+x+u};var m=function(){while(d.length>1){d.pop()}};var i=function(x){var v=false;var w;for(var u in d){w=d[u];v=t(w,x);if(v){return true}}return false};var r=function(v){var u=h(v);d.push(u)};var n=function(x){var v;var w;for(var u in d){w=d[u];v=t(w,x);if(v){var y=d.length-1;if(y!=u){var z=d[y];d[y]=d[u];d[u]=z}return}}};var g=function(){return d.length};var k=function(x){var v;var w;for(var u in d){w=d[u];v=t(w,x);if(v){++d[u][1];return}}};var b=function(v){var u=i(v);if(!u){r(v);return}k(v);n(v)};var j=function(){var u={log:function(v){b(v);u.refresh()},debug:function(v){b("Debug: "+v);u.refresh()},error:function(v){b('<span style="color:#F00">'+v+"</span>");u.refresh()},info:function(v){b("Info: "+v);u.refresh()},warn:function(v){b('<span style="color:#FF7000">'+v+"</span>");u.refresh()},refresh:function(){},clear:function(){m();u.refresh()}};return u};var a=function(x,w,y){var z=y.url;var v=w.statusText;var B=y.type;var A=(window.location.protocol.toLowerCase()==="https");if(A||true){var u=(z.split(":",1))[0];if(u==="http"||true){z=z.replace("http://",'<span style="color:#F00">http</span>://')}}z='<span style="color:#666;text-decoration:underline">'+z+"</span>";v=(v?(' <span style="color:#a6a6a6">'+v+"</span>"):"");return B+" "+z+v};window.addEventListener("error",function(u){var v=u.message;window.console.error(v);return true});e(document).ajaxError(function(x,w,y,v){var u=a(x,w,y);window.console.error(u+" "+(v?v:""))});e(document).ajaxSuccess(function(v,u,w){var x=a(v,u,w);window.console.info(x)});var s=function(){var u=g();if(u){c(d)}};var l;var c=function(x){var w=e(f);f.innerHTML="";var v;for(var u in x){v=p(x[u]);w.append(v);f.appendChild(l.cloneNode())}f.style.display="block"};var f;var o=function(){var u=document.createElement("div");u.setAttribute("id","tv-console");u.style.display="none";u.style.position="absolute";u.style.bottom=0;u.style.left=0;u.style.width="100%";u.style.borderTop="solid 1px #c6c6c6";u.style.paddingTop="7px";u.style.paddingRight="7px";u.style.paddingBottom="7px";u.style.paddingLeft="7px";u.style.color="#a6a6a6";u.style.fontSize="0.9em";document.getElementsByTagName("body")[0].appendChild(u);f=u};var q=function(){l=document.createElement("br");window.console=j();var u="";if(typeof window.console!="undefined"){u=" (native one is overridden)"}b("TV console started"+u);o();window.console.refresh=s;window.console.refresh()};e(document).ready(q)})(jQuery);