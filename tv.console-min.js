/**
 * @author Vladimir Reznichenko <kalessil@gmail.com>
 * @date   12.05.2012
 *
 * https://github.com/kalessil/tv.jquery
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */

(function(e){var d=[];var g=function(s){return[s,1]};var r=function(s,t){return s[0]===t};var n=function(u){var v=u[0];var t=u[1];var s="";if(t>1){s=" ["+t+"]"}return"&rsaquo; "+v+s};var k=function(){while(d.length>1){d.pop()}};var h=function(v){var t=false;var u;for(var s in d){u=d[s];t=r(u,v);if(t){return true}}return false};var p=function(t){var s=g(t);d.push(s)};var l=function(v){var t;var u;for(var s in d){u=d[s];t=r(u,v);if(t){var w=d.length-1;if(w!=s){var x=d[w];d[w]=d[s];d[s]=x}return}}};var f=function(){return d.length};var j=function(v){var t;var u;for(var s in d){u=d[s];t=r(u,v);if(t){++d[s][1];return}}};var b=function(t){var s=h(t);if(!s){p(t);return}j(t);l(t)};var i=function(){var s={log:function(t){b(t);s.refresh()},debug:function(t){b("Debug: "+t);s.refresh()},error:function(t){b('<span style="color:#F00">'+t+"</span>");s.refresh()},info:function(t){b("Info: "+t);s.refresh()},warn:function(t){b('<span style="color:#FF7000">'+t+"</span>");s.refresh()},refresh:function(){},clear:function(){k();s.refresh()}};return s};var a=function(v,u,w){var x=w.url;var t=u.statusText;var z=w.type;var y=(window.location.protocol.toLowerCase()==="https");if(y||true){var s=(x.split(":",1))[0];if(s==="http"||true){x=x.replace("http://",'<span style="color:#F00">http</span>://')}}x='<span style="color:#666;text-decoration:underline">'+x+"</span>";t=(t?(' <span style="color:#a6a6a6">'+t+"</span>"):"");return z+" "+x+t};window.addEventListener("error",function(s){var t=s.message;window.console.error(t);return true});e(document).ajaxError(function(v,u,w,t){var s=a(v,u,w);window.console.error(s+" "+(t?t:""))});e(document).ajaxSuccess(function(t,s,u){var v=a(t,s,u);window.console.info(v)});var q=function(){var s=f();if(s){c(d)}};var c=function(x){var w=e("#tv-console");w.html("");var u;var v;var t=document.createElement("br");for(var s in x){u=x[s];v=n(u);w.append(v);w.append(t.cloneNode())}w.show()};var m=function(){var s={display:"none",position:"absolute",bottom:"0",left:"0",width:"100%","border-top":"solid 1px #c6c6c6",padding:"7px",color:"#a6a6a6","font-size":"0.9em"};var t=document.createElement("div");t.setAttribute("id","tv-console");t=e(t);t.css(s);e("body").append(t)};var o=function(){var s="";if(typeof window.console!="undefined"){s=" (native one is overridden)"}window.console=i();b("TV console started"+s);m();window.console.refresh=q;window.console.refresh()};e(document).ready(o)})(jQuery);